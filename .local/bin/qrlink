#!/bin/bash

# Shell script to generate qr code for copied links in the clipboard
# Dependencies: qrencode, xclip, sxiv

# Determine distribution type
if [ -f "/etc/arch-release" ]; then
    PKG_MANAGER="pacman -S"
elif [ -f "/etc/lsb-release" ]; then
    PKG_MANAGER="apt-get install"
else
    echo "Unable to determine distribution type"
    exit 1
fi

# Install dependencies if not found
if ! command -v qrencode >/dev/null 2>&1 || \
   ! command -v xclip >/dev/null 2>&1 || \
   ! command -v sxiv >/dev/null 2>&1 ; then
    echo "Installing dependencies..."
    sudo $PKG_MANAGER qrencode xclip sxiv
fi

# Generate qr code for copied link in clipboard
qrencode -t PNG  -s 8 -o /tmp/tmp.png $(xclip -o)
sxiv /tmp/tmp.png

